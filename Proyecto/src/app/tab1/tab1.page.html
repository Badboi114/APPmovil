<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      <ion-icon name="key-outline"></ion-icon>
      Generador de Contrase√±as
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="generator-content">
  <div class="generator-container">
    <h2>Generador de Contrase√±as Seguras</h2>
    <p>Crea contrase√±as fuertes y cifradas para m√°xima seguridad.</p>

    <!-- Contrase√±a Generada -->
    <ion-card class="password-output-card">
      <ion-card-content>
        <div class="password-header">
          <h3>Contrase√±a Generada</h3>
          <ion-button fill="clear" (click)="copyPassword()" class="copy-btn">
            <ion-icon name="copy-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="password-display" [innerHTML]="generatedPassword"></div>
        
        <!-- Indicador de Fortaleza -->
        <div *ngIf="passwordStrength" class="strength-indicator">
          <ion-label>Fortaleza: {{passwordStrength.level}}</ion-label>
          <ion-progress-bar [value]="getStrengthValue()" [color]="getStrengthColor()"></ion-progress-bar>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Contrase√±a Cifrada -->
    <ion-card *ngIf="encryptedPassword" class="encrypted-card">
      <ion-card-content>
        <div class="password-header">
          <h3>
            <ion-icon name="shield-outline"></ion-icon>
            Contrase√±a Cifrada (AES-256)
          </h3>
          <ion-button fill="clear" (click)="copyEncryptedPassword()" class="copy-btn">
            <ion-icon name="copy-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="encrypted-display">{{encryptedPassword}}</div>
      </ion-card-content>
    </ion-card>

    <!-- Configuraciones -->
    <ion-card>
      <ion-card-content>
        <!-- Tipo de Contrase√±a -->
        <ion-item>
          <ion-label>Tipo de Contrase√±a</ion-label>
          <ion-select [(ngModel)]="passwordType" (ionChange)="onPasswordTypeChange()">
            <ion-select-option value="muy-segura">
              <ion-icon name="shield-outline"></ion-icon>
              Muy Segura (50 caracteres)
            </ion-select-option>
            <ion-select-option value="personalizada">Personalizada</ion-select-option>
            <ion-select-option value="wpa">
              <ion-icon name="wifi-outline"></ion-icon>
              WPA Personal
            </ion-select-option>
            <ion-select-option value="wpa2">
              <ion-icon name="wifi-outline"></ion-icon>
              WPA2 Personal
            </ion-select-option>
            <ion-select-option value="passphrase">Frase de Contrase√±a</ion-select-option>
          </ion-select>
        </ion-item>

        <!-- Longitud de Contrase√±a -->
  <ion-item *ngIf="passwordType !== 'passphrase' && passwordType !== 'muy-segura'">
          <ion-label>
            Longitud: {{passwordLength}}
            <span *ngIf="passwordType === 'wpa' || passwordType === 'wpa2'">(m√≠n. 16 para WiFi)</span>
          </ion-label>
        </ion-item>
        
        <!-- Informaci√≥n para contrase√±a muy segura -->
  <ion-item *ngIf="passwordType === 'muy-segura'">
          <ion-label>
            <h3>üõ°Ô∏è Contrase√±a Ultra Segura</h3>
            <p>Longitud fija: 50 caracteres con m√°xima complejidad</p>
          </ion-label>
        </ion-item>

        <ion-range 
          *ngIf="passwordType !== 'passphrase' && passwordType !== 'muy-segura'"
          [(ngModel)]="passwordLength" 
          [min]="passwordType === 'wpa' || passwordType === 'wpa2' ? 16 : 4" 
          [max]="passwordType === 'wpa' || passwordType === 'wpa2' ? 63 : 50" 
          step="1"
          color="primary">
        </ion-range>

        <!-- N√∫mero de Palabras para Passphrase -->
        <ion-item *ngIf="passwordType === 'passphrase'">
          <ion-label>N√∫mero de Palabras: {{passwordLength}}</ion-label>
        </ion-item>
        <ion-range 
          *ngIf="passwordType === 'passphrase'"
          [(ngModel)]="passwordLength" 
          min="3" 
          max="8" 
          step="1"
          color="primary">
        </ion-range>

        <!-- Opciones de Caracteres (solo para personalizada) -->
  <div *ngIf="passwordType === 'personalizada'">
          <ion-item>
            <ion-checkbox [(ngModel)]="includeUppercase"></ion-checkbox>
            <ion-label class="ion-margin-start">Incluir May√∫sculas</ion-label>
          </ion-item>

          <ion-item>
            <ion-checkbox [(ngModel)]="includeLowercase"></ion-checkbox>
            <ion-label class="ion-margin-start">Incluir Min√∫sculas</ion-label>
          </ion-item>

          <ion-item>
            <ion-checkbox [(ngModel)]="includeNumbers"></ion-checkbox>
            <ion-label class="ion-margin-start">Incluir N√∫meros</ion-label>
          </ion-item>

          <ion-item>
            <ion-checkbox [(ngModel)]="includeSymbols"></ion-checkbox>
            <ion-label class="ion-margin-start">Incluir S√≠mbolos</ion-label>
          </ion-item>
        </div>

        <!-- Informaci√≥n WPA/WPA2 -->
        <div *ngIf="passwordType === 'wpa' || passwordType === 'wpa2'" class="wpa-info">
          <p><strong>‚ö° Configuraci√≥n Optimizada para WiFi:</strong></p>
          <ul>
            <li>Longitud: 16-63 caracteres (recomendado: 16+)</li>
            <li>Incluye may√∫sculas, min√∫sculas, n√∫meros y s√≠mbolos</li>
            <li>Compatible con todos los dispositivos</li>
            <li>Cifrado autom√°tico con AES-256</li>
          </ul>
        </div>

        <ion-button expand="block" (click)="generatePassword()" class="generate-btn">
          <ion-icon name="refresh-outline" slot="start"></ion-icon>
          <span *ngIf="passwordType === 'wpa' || passwordType === 'wpa2'">Generar Contrase√±a WiFi</span>
          <span *ngIf="passwordType === 'passphrase'">Generar Frase de Contrase√±a</span>
          <span *ngIf="passwordType === 'personalizada'">Generar Contrase√±a</span>
          <span *ngIf="passwordType === 'muy-segura'">Generar Contrase√±a Muy Segura</span>
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
